<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>JBRL: map.Map Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>map</b>.<a class="el" href="classmap_1_1_map.html">Map</a>
  </div>
</div>
<div class="contents">
<h1>map.Map Class Reference</h1><!-- doxytag: class="map::Map" -->The <a class="el" href="classmap_1_1_map.html" title="The Map class handles creating, updating, and displaying the game map.">Map</a> class handles creating, updating, and displaying the <a class="el" href="namespacegame.html" title="This package centralizes access to singletons.">game</a> map.  
<a href="#_details">More...</a>
<p>

<p>
<a href="classmap_1_1_map-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#c4547ef6e6d9a6b9e450694c3b7cc48e">__init__</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare a blank map and a bunch of values we'll need while constructing it.  <a href="#c4547ef6e6d9a6b9e450694c3b7cc48e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#705f3dde2ba73fab12a844349cf13552">init</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Either create or load a map.  <a href="#705f3dde2ba73fab12a844349cf13552"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#9575c729a2ed430b516be45853df7f85">createMap</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a map, by the following steps:<ul>
<li>Divide the universe up into regions</li><li>Generate a tree to mark the locations of tunnels. </li></ul>
 <a href="#9575c729a2ed430b516be45853df7f85"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#6f87641af3d01e85b6e5609a216ccb29">makeRegions</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a low-rez overlay of the map that determines where different regions are.  <a href="#6f87641af3d01e85b6e5609a216ccb29"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#17f7ab15ed10b2d196d07dd5a7b266ef">createJunctions</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create open junctions wherever two corridors meet.  <a href="#17f7ab15ed10b2d196d07dd5a7b266ef"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#15dbdc8e7f11ee9c0166556e76c5c99b">expandWalls</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Widen every wall by adding walls on either side.  <a href="#15dbdc8e7f11ee9c0166556e76c5c99b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#01f1f483a55da4d6b20491bb18940dfd">instantiateBlocks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Replace the values in self.blocks with block type info.  <a href="#01f1f483a55da4d6b20491bb18940dfd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#0e765c475fe1363b9ef4facf16b2f694">getBlockType</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the type of block that should be drawn at the given grid loc.  <a href="#0e765c475fe1363b9ef4facf16b2f694"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#f2d7f67c962a5ae5311b608719a7b26a">removeIslands</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do a connectivity check on the map.  <a href="#f2d7f67c962a5ae5311b608719a7b26a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#e3f7639ae1201c7f7701b6427ed63559">plantSeed</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Plant a seed for hollowing out part of the map at the desired location.  <a href="#e3f7639ae1201c7f7701b6427ed63559"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#6c81abfa8221d130ae9841a48287b2b5">expandSeeds</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Run a spacefilling automaton to divide a grid up into different sectors.  <a href="#6c81abfa8221d130ae9841a48287b2b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#70c15338d039e86e3f116997493c6a35">tryMergeDeadSeed</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to merge the given seed with the dead seed at loc.  <a href="#70c15338d039e86e3f116997493c6a35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#c5644ab0277fe49f65e1d99fba7d4fff">assignSquares</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assign all open spaces to the sectors that own them.  <a href="#c5644ab0277fe49f65e1d99fba7d4fff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#80f0fe75b8a76faccb4be5c690dc5cf5">fixSeedOwnership</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds islands of dead seeds and reassigns their ownership.  <a href="#80f0fe75b8a76faccb4be5c690dc5cf5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#f12a3205eb0fba7b6d012ec3e0366e08">placeFurniture</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call treenode.placeFurniture to add interesting solid features to the map.  <a href="#f12a3205eb0fba7b6d012ec3e0366e08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#73998d9aa527fb3c51d98216619d7140">fixAccessibility</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call treenode.fixAccessibility() to create platforms to ensure map accessibility.  <a href="#73998d9aa527fb3c51d98216619d7140"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#34b66e06e1d18dcc38d10f02fe8d7406">getDistanceToWall</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the nearest wall to the given starting block along the normalized vector direction.  <a href="#34b66e06e1d18dcc38d10f02fe8d7406"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#b1b7fcf440973204dcbb05dda3de4264">markPlatform</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build platforms out from start along direction until we get distance away from start.  <a href="#b1b7fcf440973204dcbb05dda3de4264"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#072ba2822a75c2f5e153fc705308cdfe">buildPlatforms</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a set of blocks for each location in self.platforms.  <a href="#072ba2822a75c2f5e153fc705308cdfe"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#f2dfb946b252c489a9c3f6a66e9da343">drawStatus</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw an intermediary status image and saves it to disk.  <a href="#f2dfb946b252c489a9c3f6a66e9da343"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#4cde5e8a8f0a9dd16139ff1618ea583b">drawAll</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw a complete view of the map for purposes of looking pretty.  <a href="#4cde5e8a8f0a9dd16139ff1618ea583b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#b61ee51e262071f36d78a2d1cfc4dc79">drawBackground</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw the background scenery and any environmental effects at the given location.  <a href="#b61ee51e262071f36d78a2d1cfc4dc79"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#f0c4bfb7fb60829bd9dc3816d080b60e">drawMidground</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Draw the furniture and terrain tiles.  <a href="#f0c4bfb7fb60829bd9dc3816d080b60e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#d3f111043dcd98818bf34dd24b8e6d29">getIsValidLine</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if the given line is allowed to be added to our set.  <a href="#d3f111043dcd98818bf34dd24b8e6d29"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#2000ce674584690040a4451b3c744f15">addLine</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add the given line to our set.  <a href="#2000ce674584690040a4451b3c744f15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#a13c4fd57f7c44654f9bc000afe60cf1">assignSpace</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assign the given space to the given node, and unassign it from whoever owned it before.  <a href="#a13c4fd57f7c44654f9bc000afe60cf1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#764a08f67241115c5168a167ad7243b2">addPlatform</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark a space as containing a platform.  <a href="#764a08f67241115c5168a167ad7243b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#05d1c88d975ef4b5b5c4fcb2e72ccc54">addBackgroundObject</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a background object (a Scenery instance) to the map.  <a href="#05d1c88d975ef4b5b5c4fcb2e72ccc54"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#fe873c43dd6a0bad5350e2f1e70ec78c">addEnvEffect</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark the given tile as containing the selected environmental effect.  <a href="#fe873c43dd6a0bad5350e2f1e70ec78c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d795890586d18cb8d7fb75b4fa135c71"></a><!-- doxytag: member="map::Map::getStartLoc" ref="d795890586d18cb8d7fb75b4fa135c71" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>getStartLoc</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#c8f04504ef2196bf26afcb616ec684f5">collideObject</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Collide the given object against our terrain, and keep doing it until the object is not intersecting any blocks, or we hit our maximum number of attempts (in which case the object gets zipped).  <a href="#c8f04504ef2196bf26afcb616ec684f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#09568d826a804d733c1b7493600d5bad">collidePolygon</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Collide a polygon against our terrain, and return a CollisionData object.  <a href="#09568d826a804d733c1b7493600d5bad"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#23a1cb8a9aaccd0596c5ed35f6689600">fixEjectionVector</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine if there is a block adjacent to the given block along the provided vector.  <a href="#23a1cb8a9aaccd0596c5ed35f6689600"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#263a7fedc82cdafa1807be418be319f9">loadMap</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load map information from disk.  <a href="#263a7fedc82cdafa1807be418be319f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#4fe9c69302d1ca2b0cd522e59614a111">addBlock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a block to the map.  <a href="#4fe9c69302d1ca2b0cd522e59614a111"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="48188626b6f445dfe8b3949e9faef1e5"></a><!-- doxytag: member="map::Map::deleteBlock" ref="48188626b6f445dfe8b3949e9faef1e5" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#48188626b6f445dfe8b3949e9faef1e5">deleteBlock</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove a block from the map. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#a5ba8834ec6f30eced3eac3e8dfd1373">addFurniture</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add furniture at the given location.  <a href="#a5ba8834ec6f30eced3eac3e8dfd1373"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#e9ba25c593e57c3c97164eec5382eac9">writeMap</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write our map to disk so it can be read by <a class="el" href="classmap_1_1_map.html#263a7fedc82cdafa1807be418be319f9" title="Load map information from disk.">loadMap()</a>.  <a href="#e9ba25c593e57c3c97164eec5382eac9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#1a13a5c8c13281b0d8019ed2945eb016">getIsInBounds</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simple boundary check for the blocks grid.  <a href="#1a13a5c8c13281b0d8019ed2945eb016"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#dde526880b436f039cb2a7929d934570">getTerrainInfoAtGridLoc</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the region information at the given location.  <a href="#dde526880b436f039cb2a7929d934570"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a578b2db7362c7111b19e69017226910"></a><!-- doxytag: member="map::Map::getBlockAtGridLoc" ref="a578b2db7362c7111b19e69017226910" args="" -->
def&nbsp;</td><td class="memItemRight" valign="bottom"><b>getBlockAtGridLoc</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#bcd166a82a17a1cf4aa5bd250c745b1d">getSectorAtGridLoc</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the TreeNode that owns the given space, if any.  <a href="#bcd166a82a17a1cf4aa5bd250c745b1d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#66418f800f2ede9b7ae4d4cfca9bfe6b">getRegionInfo</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the data in the specified field for the given terrain type.  <a href="#66418f800f2ede9b7ae4d4cfca9bfe6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">def&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#7b2663bd05ce0955be02227dbe5f996f">getBounds</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the size of the <a class="el" href="namespacegame.html" title="This package centralizes access to singletons.">game</a> map as a PyGame Rect.  <a href="#7b2663bd05ce0955be02227dbe5f996f"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fe579e2668bfd396b1f51b6f8701445d"></a><!-- doxytag: member="map::Map::statusIter" ref="fe579e2668bfd396b1f51b6f8701445d" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#fe579e2668bfd396b1f51b6f8701445d">statusIter</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of the most recent file output by <a class="el" href="classmap_1_1_map.html#f2dfb946b252c489a9c3f6a66e9da343" title="Draw an intermediary status image and saves it to disk.">drawStatus()</a>. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e971385899963309ed76d03a353cac3a"></a><!-- doxytag: member="map::Map::mapName" ref="e971385899963309ed76d03a353cac3a" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>mapName</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="298f280b6e951ab4e2a3cbfa89e79098"></a><!-- doxytag: member="map::Map::blocks" ref="298f280b6e951ab4e2a3cbfa89e79098" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#298f280b6e951ab4e2a3cbfa89e79098">blocks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">2D array of blocks (or None to indicate empty space) During map construction, we use BLOCK_* values instead <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5a1e4e8ee410cefc8c909429a9554299"></a><!-- doxytag: member="map::Map::furnitureQuadTree" ref="5a1e4e8ee410cefc8c909429a9554299" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#5a1e4e8ee410cefc8c909429a9554299">furnitureQuadTree</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds Furniture instances. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#2127bf69a497a845a27c75e656ad6df3">envGrid</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Marks spaces as belonging to different environments.  <a href="#2127bf69a497a845a27c75e656ad6df3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#5d70ce7a8300a17bb291d9ad779624e9">backgroundQuadTree</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds background scenery.  <a href="#5d70ce7a8300a17bb291d9ad779624e9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#ffe2209a978182f65268e6ceae34b256">tree</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Marks high-level structure of the map.  <a href="#ffe2209a978182f65268e6ceae34b256"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1e5a7983346e864549c9736419a9e8a5"></a><!-- doxytag: member="map::Map::zoneData" ref="1e5a7983346e864549c9736419a9e8a5" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#1e5a7983346e864549c9736419a9e8a5">zoneData</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Holds configuration information for the different zones. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#f3c9bc6f5efea67345967b59e8547a3a">regions</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This will be a dict that maps locations to zones.  <a href="#f3c9bc6f5efea67345967b59e8547a3a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9c7d3cf04c80270db6fb215f23605f90"></a><!-- doxytag: member="map::Map::seeds" ref="9c7d3cf04c80270db6fb215f23605f90" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#9c7d3cf04c80270db6fb215f23605f90">seeds</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maps locations to objects (either TreeNode instances or regions). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#18068659a3af72809a28c5484b06e16d">deadSeeds</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Seeds that are no longer expanding.  <a href="#18068659a3af72809a28c5484b06e16d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#3bd9ad023f37ae818aae556182564f92">markLoc</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If this is not None, then <a class="el" href="classmap_1_1_map.html#f2dfb946b252c489a9c3f6a66e9da343" title="Draw an intermediary status image and saves it to disk.">drawStatus()</a> will focus on this area.  <a href="#3bd9ad023f37ae818aae556182564f92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#150f59413590937f850ecfef224ca5ca">adjacenciesMap</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Maps block adjacency signatures (see adjacencyKernelToBlockTypeMap) to block orientations.  <a href="#150f59413590937f850ecfef224ca5ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="96738926cc2d38b9ea3a4585709a4014"></a><!-- doxytag: member="map::Map::width" ref="96738926cc2d38b9ea3a4585709a4014" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>width</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="54738a73e03fd757f19b6b424667ff70"></a><!-- doxytag: member="map::Map::height" ref="54738a73e03fd757f19b6b424667ff70" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>height</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#8593d2583815096eb58195fc9028e2c9">treeLines</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This quadtree holds lines; we use it to make certain that limbs of the tree do not come too close to each other (or intersect).  <a href="#8593d2583815096eb58195fc9028e2c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmap_1_1_map.html#7f8fb9a344a0dd68cca9958408551f93">platformsQuadTree</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A quadtree of Platform instances created during fixAccessibility, that will be converted into actual blocks near the end of mapgen.  <a href="#7f8fb9a344a0dd68cca9958408551f93"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9f5cce4053ab5b736e6c0c7245c30ef"></a><!-- doxytag: member="map::Map::numCols" ref="a9f5cce4053ab5b736e6c0c7245c30ef" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>numCols</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3a3e9735639a9587ca3a79f2660b584"></a><!-- doxytag: member="map::Map::numRows" ref="a3a3e9735639a9587ca3a79f2660b584" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>numRows</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="14fd224ece2a06861d474e622b0657cd"></a><!-- doxytag: member="map::Map::startLoc" ref="14fd224ece2a06861d474e622b0657cd" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>startLoc</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="classmap_1_1_map.html" title="The Map class handles creating, updating, and displaying the game map.">Map</a> class handles creating, updating, and displaying the <a class="el" href="namespacegame.html" title="This package centralizes access to singletons.">game</a> map. 
<p>
This includes the following structures:<ul>
<li>The root TreeNode for the tree that describes the high-level structure of the map tunnels.</li><li>A grid of terrain tiles.</li><li>Another grid for environmental effects.</li><li>A quadtree containing all background scenery. <dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000009">Todo:</a></b></dt><dd>Several dicts in this class don't match the style guideline. </dd></dl>
</li></ul>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c4547ef6e6d9a6b9e450694c3b7cc48e"></a><!-- doxytag: member="map::Map::__init__" ref="c4547ef6e6d9a6b9e450694c3b7cc48e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.__init__           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>mapName</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepare a blank map and a bunch of values we'll need while constructing it. 
<p>
Most of this is unneeded if we're loading the map. 
</div>
</div><p>
<a class="anchor" name="05d1c88d975ef4b5b5c4fcb2e72ccc54"></a><!-- doxytag: member="map::Map::addBackgroundObject" ref="05d1c88d975ef4b5b5c4fcb2e72ccc54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addBackgroundObject           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>obj</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a background object (a Scenery instance) to the map. 
<p>

</div>
</div><p>
<a class="anchor" name="4fe9c69302d1ca2b0cd522e59614a111"></a><!-- doxytag: member="map::Map::addBlock" ref="4fe9c69302d1ca2b0cd522e59614a111" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addBlock           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>newBlock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a block to the map. 
<p>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000011">Todo:</a></b></dt><dd>Handle expanding the map to place blocks outside of its current boundaries. </dd></dl>

</div>
</div><p>
<a class="anchor" name="fe873c43dd6a0bad5350e2f1e70ec78c"></a><!-- doxytag: member="map::Map::addEnvEffect" ref="fe873c43dd6a0bad5350e2f1e70ec78c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addEnvEffect           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>effect</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark the given tile as containing the selected environmental effect. 
<p>

</div>
</div><p>
<a class="anchor" name="a5ba8834ec6f30eced3eac3e8dfd1373"></a><!-- doxytag: member="map::Map::addFurniture" ref="a5ba8834ec6f30eced3eac3e8dfd1373" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addFurniture           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>furniture</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add furniture at the given location. 
<p>

</div>
</div><p>
<a class="anchor" name="2000ce674584690040a4451b3c744f15"></a><!-- doxytag: member="map::Map::addLine" ref="2000ce674584690040a4451b3c744f15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addLine           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>line</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add the given line to our set. 
<p>

</div>
</div><p>
<a class="anchor" name="764a08f67241115c5168a167ad7243b2"></a><!-- doxytag: member="map::Map::addPlatform" ref="764a08f67241115c5168a167ad7243b2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.addPlatform           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mark a space as containing a platform. 
<p>
Don't do tile assignation until later, as it might interfere with TreeNode.fixAccessibility() if done now. 
</div>
</div><p>
<a class="anchor" name="a13c4fd57f7c44654f9bc000afe60cf1"></a><!-- doxytag: member="map::Map::assignSpace" ref="a13c4fd57f7c44654f9bc000afe60cf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.assignSpace           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>node</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assign the given space to the given node, and unassign it from whoever owned it before. 
<p>

</div>
</div><p>
<a class="anchor" name="c5644ab0277fe49f65e1d99fba7d4fff"></a><!-- doxytag: member="map::Map::assignSquares" ref="c5644ab0277fe49f65e1d99fba7d4fff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.assignSquares           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assign all open spaces to the sectors that own them. 
<p>

</div>
</div><p>
<a class="anchor" name="072ba2822a75c2f5e153fc705308cdfe"></a><!-- doxytag: member="map::Map::buildPlatforms" ref="072ba2822a75c2f5e153fc705308cdfe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.buildPlatforms           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a set of blocks for each location in self.platforms. 
<p>

</div>
</div><p>
<a class="anchor" name="c8f04504ef2196bf26afcb616ec684f5"></a><!-- doxytag: member="map::Map::collideObject" ref="c8f04504ef2196bf26afcb616ec684f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.collideObject           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>object</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Collide the given object against our terrain, and keep doing it until the object is not intersecting any blocks, or we hit our maximum number of attempts (in which case the object gets zipped). 
<p>

</div>
</div><p>
<a class="anchor" name="09568d826a804d733c1b7493600d5bad"></a><!-- doxytag: member="map::Map::collidePolygon" ref="09568d826a804d733c1b7493600d5bad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.collidePolygon           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>poly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Collide a polygon against our terrain, and return a CollisionData object. 
<p>

</div>
</div><p>
<a class="anchor" name="17f7ab15ed10b2d196d07dd5a7b266ef"></a><!-- doxytag: member="map::Map::createJunctions" ref="17f7ab15ed10b2d196d07dd5a7b266ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.createJunctions           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create open junctions wherever two corridors meet. 
<p>

</div>
</div><p>
<a class="anchor" name="9575c729a2ed430b516be45853df7f85"></a><!-- doxytag: member="map::Map::createMap" ref="9575c729a2ed430b516be45853df7f85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.createMap           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a map, by the following steps:<ul>
<li>Divide the universe up into regions</li><li>Generate a tree to mark the locations of tunnels. </li></ul>

<p>
<ul>
<li>Place seeds for the spacefilling automaton (<a class="el" href="classmap_1_1_map.html#6c81abfa8221d130ae9841a48287b2b5" title="Run a spacefilling automaton to divide a grid up into different sectors.">expandSeeds()</a>) along the limbs of the tree.</li><li>Run <a class="el" href="classmap_1_1_map.html#6c81abfa8221d130ae9841a48287b2b5" title="Run a spacefilling automaton to divide a grid up into different sectors.">expandSeeds()</a> to carve out tunnels starting from those seeds.</li><li>Clean up the tunnel intersections.</li><li>Remove any small islands in the map.</li><li>Thicken the walls.</li><li>Clean up TreeNode ownership of tiles by removing islands.</li><li>Construct special map features.</li><li>Run a wallwalking algorithm to fix map accessibility by placing platforms.</li><li>Choose the type of block for each space in the grid, based on the region the space is in and the space's neighbors, then instantiate the Block objects.</li><li>Find the starting point for the player. </li></ul>

</div>
</div><p>
<a class="anchor" name="4cde5e8a8f0a9dd16139ff1618ea583b"></a><!-- doxytag: member="map::Map::drawAll" ref="4cde5e8a8f0a9dd16139ff1618ea583b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.drawAll           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>filename</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draw a complete view of the map for purposes of looking pretty. 
<p>
Saves the result to disk under the provided filename. 
</div>
</div><p>
<a class="anchor" name="b61ee51e262071f36d78a2d1cfc4dc79"></a><!-- doxytag: member="map::Map::drawBackground" ref="b61ee51e262071f36d78a2d1cfc4dc79" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.drawBackground           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>cameraLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>progress</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draw the background scenery and any environmental effects at the given location. 
<p>

</div>
</div><p>
<a class="anchor" name="f0c4bfb7fb60829bd9dc3816d080b60e"></a><!-- doxytag: member="map::Map::drawMidground" ref="f0c4bfb7fb60829bd9dc3816d080b60e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.drawMidground           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>screen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>cameraLoc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>progress</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draw the furniture and terrain tiles. 
<p>

</div>
</div><p>
<a class="anchor" name="f2dfb946b252c489a9c3f6a66e9da343"></a><!-- doxytag: member="map::Map::drawStatus" ref="f2dfb946b252c489a9c3f6a66e9da343" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.drawStatus           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>blocks</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>seeds</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>deadSeeds</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>marks</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>shouldZoom</em> = <code>True</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Draw an intermediary status image and saves it to disk. 
<p>
These are often very helpful for debugging purposes. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>blocks</em>&nbsp;</td><td>The current blocks for the grid. Uses self.blocks if None. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>seeds</em>&nbsp;</td><td>Active seeds used during map.expandSeeds(). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>deadSeeds</em>&nbsp;</td><td>Inactive seeds, used to mark sectors on the map. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>marks</em>&nbsp;</td><td>List of other locations that should be specially marked. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shouldZoom</em>&nbsp;</td><td>If true and self.markLoc is set, zoom in on that location. In addition to the above, if map.markLoc is defined, then the map will be focused on that location. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="6c81abfa8221d130ae9841a48287b2b5"></a><!-- doxytag: member="map::Map::expandSeeds" ref="6c81abfa8221d130ae9841a48287b2b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.expandSeeds           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>seeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>blocks</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Run a spacefilling automaton to divide a grid up into different sectors. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>seeds</em>&nbsp;</td><td>A mapping of locations to Seed instances </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>blocks</em>&nbsp;</td><td>A grid of blocks Each seed ordinarily replaces all neighbor spaces with copies of itself that have 1 less turn to live. When a seed dies (has 0 life), its location is marked as open in the blocks grid. Dead seeds are retained so we can map spaces to the sectors that own those spaces. When two expanding seeds collide, they merge if they are for the same sector (as determined by their 'node' property), or form a wall between them if they are not. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="15dbdc8e7f11ee9c0166556e76c5c99b"></a><!-- doxytag: member="map::Map::expandWalls" ref="15dbdc8e7f11ee9c0166556e76c5c99b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.expandWalls           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Widen every wall by adding walls on either side. 
<p>

</div>
</div><p>
<a class="anchor" name="73998d9aa527fb3c51d98216619d7140"></a><!-- doxytag: member="map::Map::fixAccessibility" ref="73998d9aa527fb3c51d98216619d7140" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.fixAccessibility           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call treenode.fixAccessibility() to create platforms to ensure map accessibility. 
<p>

</div>
</div><p>
<a class="anchor" name="23a1cb8a9aaccd0596c5ed35f6689600"></a><!-- doxytag: member="map::Map::fixEjectionVector" ref="23a1cb8a9aaccd0596c5ed35f6689600" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.fixEjectionVector           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>vector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>centerBlock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if there is a block adjacent to the given block along the provided vector. 
<p>
If there is, find an alternate direction that isn't obstructed and return it. 
</div>
</div><p>
<a class="anchor" name="80f0fe75b8a76faccb4be5c690dc5cf5"></a><!-- doxytag: member="map::Map::fixSeedOwnership" ref="80f0fe75b8a76faccb4be5c690dc5cf5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.fixSeedOwnership           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>blocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>seeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>shouldReassignSpaces</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Finds islands of dead seeds and reassigns their ownership. 
<p>
It is possible to get islands of dead seeds that are in the "wrong" sector (i.e. they are entirely surrounded by walls, or seeds from a different sector). This breaks our wallwalking algorithm in treenode.fixAccessibility(), so find these islands and fix them. "Islands" are regions of seeds that are below a minimum cutoff size. 
</div>
</div><p>
<a class="anchor" name="0e765c475fe1363b9ef4facf16b2f694"></a><!-- doxytag: member="map::Map::getBlockType" ref="0e765c475fe1363b9ef4facf16b2f694" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getBlockType           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>y</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the type of block that should be drawn at the given grid loc. 
<p>
Determine this by the locations of neighbors of the block -- its "adjacency signature". 
</div>
</div><p>
<a class="anchor" name="7b2663bd05ce0955be02227dbe5f996f"></a><!-- doxytag: member="map::Map::getBounds" ref="7b2663bd05ce0955be02227dbe5f996f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getBounds           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the size of the <a class="el" href="namespacegame.html" title="This package centralizes access to singletons.">game</a> map as a PyGame Rect. 
<p>

</div>
</div><p>
<a class="anchor" name="34b66e06e1d18dcc38d10f02fe8d7406"></a><!-- doxytag: member="map::Map::getDistanceToWall" ref="34b66e06e1d18dcc38d10f02fe8d7406" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getDistanceToWall           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>node</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the nearest wall to the given starting block along the normalized vector direction. 
<p>
Return the realspace distance to that wall. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>Node in the tree that we are to contain our search to. If None, then do not constrain the search. Otherwise, treat regions outside that node's area as walls. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="1a13a5c8c13281b0d8019ed2945eb016"></a><!-- doxytag: member="map::Map::getIsInBounds" ref="1a13a5c8c13281b0d8019ed2945eb016" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getIsInBounds           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>numCols</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>numRows</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simple boundary check for the blocks grid. 
<p>

</div>
</div><p>
<a class="anchor" name="d3f111043dcd98818bf34dd24b8e6d29"></a><!-- doxytag: member="map::Map::getIsValidLine" ref="d3f111043dcd98818bf34dd24b8e6d29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getIsValidLine           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>newLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>safePoints</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Determine if the given line is allowed to be added to our set. 
<p>
Invalid lines come too close to other lines. This code ensures that we don't have accidental crossings in the map. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>safePoints</em>&nbsp;</td><td>List of points that are already known to connect to other lines in the tree. newLine is allowed to touch points in safePoints, but otherwise is not allowed to come close to other lines. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="66418f800f2ede9b7ae4d4cfca9bfe6b"></a><!-- doxytag: member="map::Map::getRegionInfo" ref="66418f800f2ede9b7ae4d4cfca9bfe6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getRegionInfo           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>field</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the data in the specified field for the given terrain type. 
<p>

</div>
</div><p>
<a class="anchor" name="bcd166a82a17a1cf4aa5bd250c745b1d"></a><!-- doxytag: member="map::Map::getSectorAtGridLoc" ref="bcd166a82a17a1cf4aa5bd250c745b1d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getSectorAtGridLoc           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the TreeNode that owns the given space, if any. 
<p>

</div>
</div><p>
<a class="anchor" name="dde526880b436f039cb2a7929d934570"></a><!-- doxytag: member="map::Map::getTerrainInfoAtGridLoc" ref="dde526880b436f039cb2a7929d934570" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.getTerrainInfoAtGridLoc           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the region information at the given location. 
<p>
See <a class="el" href="classmap_1_1_map.html#6f87641af3d01e85b6e5609a216ccb29" title="Create a low-rez overlay of the map that determines where different regions are.">makeRegions()</a> for more information on regions. 
</div>
</div><p>
<a class="anchor" name="705f3dde2ba73fab12a844349cf13552"></a><!-- doxytag: member="map::Map::init" ref="705f3dde2ba73fab12a844349cf13552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.init           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Either create or load a map. 
<p>

</div>
</div><p>
<a class="anchor" name="01f1f483a55da4d6b20491bb18940dfd"></a><!-- doxytag: member="map::Map::instantiateBlocks" ref="01f1f483a55da4d6b20491bb18940dfd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.instantiateBlocks           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Replace the values in self.blocks with block type info. 
<p>
At this point self.blocks consists of the following:<ul>
<li>0: empty space</li><li>1: filled space surrounded by other filled space</li><li>2: filled space next to empty space</li><li>Tuple of block typestring (e.g. 'upleft') and adjacency signature </li></ul>

</div>
</div><p>
<a class="anchor" name="263a7fedc82cdafa1807be418be319f9"></a><!-- doxytag: member="map::Map::loadMap" ref="263a7fedc82cdafa1807be418be319f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.loadMap           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load map information from disk. 
<p>
The filename is equal to the name of the map. <dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000010">Todo:</a></b></dt><dd>This parser is very brittle, and while the map file format is not meant to be directly user-editable, there's no reason we couldn't be more flexible here. </dd></dl>

</div>
</div><p>
<a class="anchor" name="6f87641af3d01e85b6e5609a216ccb29"></a><!-- doxytag: member="map::Map::makeRegions" ref="6f87641af3d01e85b6e5609a216ccb29" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.makeRegions           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a low-rez overlay of the map that determines where different regions are. 
<p>
Each region is a subset of some overarching zone (for example, a "furnace" region in the "magma caverns" zone). Regions are important for varying map generation, particularly in the availability of different map features and the selection of terrain tiles. We use the same spacefilling automaton we use to carve tunnels, to make the region map. 
</div>
</div><p>
<a class="anchor" name="b1b7fcf440973204dcbb05dda3de4264"></a><!-- doxytag: member="map::Map::markPlatform" ref="b1b7fcf440973204dcbb05dda3de4264" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.markPlatform           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>distance</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Build platforms out from start along direction until we get distance away from start. 
<p>

</div>
</div><p>
<a class="anchor" name="f12a3205eb0fba7b6d012ec3e0366e08"></a><!-- doxytag: member="map::Map::placeFurniture" ref="f12a3205eb0fba7b6d012ec3e0366e08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.placeFurniture           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call treenode.placeFurniture to add interesting solid features to the map. 
<p>

</div>
</div><p>
<a class="anchor" name="e3f7639ae1201c7f7701b6427ed63559"></a><!-- doxytag: member="map::Map::plantSeed" ref="e3f7639ae1201c7f7701b6427ed63559" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.plantSeed           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Plant a seed for hollowing out part of the map at the desired location. 
<p>

</div>
</div><p>
<a class="anchor" name="f2d7f67c962a5ae5311b608719a7b26a"></a><!-- doxytag: member="map::Map::removeIslands" ref="f2d7f67c962a5ae5311b608719a7b26a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.removeIslands           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Do a connectivity check on the map. 
<p>
Remove all areas whose size is less than minimumIslandSize. This is very similar to the logic in <a class="el" href="classmap_1_1_map.html#80f0fe75b8a76faccb4be5c690dc5cf5" title="Finds islands of dead seeds and reassigns their ownership.">fixSeedOwnership()</a>, but operates on walls (and unallocated space) instead of seeds and removes islands entirely instead of merging them with neighbors. 
</div>
</div><p>
<a class="anchor" name="70c15338d039e86e3f116997493c6a35"></a><!-- doxytag: member="map::Map::tryMergeDeadSeed" ref="70c15338d039e86e3f116997493c6a35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.tryMergeDeadSeed           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>curSeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>seeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>deadSeeds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>numCols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>numRows</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Try to merge the given seed with the dead seed at loc. 
<p>
We can merge if they have the same source on the tree, and there are no seeds adjacent to that seed, dead or alive, that have a different source. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>seed</em>&nbsp;</td><td>The seed that wants to expand into loc </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loc</em>&nbsp;</td><td>The location that seed is expanding into </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e9ba25c593e57c3c97164eec5382eac9"></a><!-- doxytag: member="map::Map::writeMap" ref="e9ba25c593e57c3c97164eec5382eac9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def map.Map.writeMap           </td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>name</em> = <code>None</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write our map to disk so it can be read by <a class="el" href="classmap_1_1_map.html#263a7fedc82cdafa1807be418be319f9" title="Load map information from disk.">loadMap()</a>. 
<p>
<dl class="todo" compact><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd>Make saveable objects handle their own read/write logic. This is getting pretty ugly. </dd></dl>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="150f59413590937f850ecfef224ca5ca"></a><!-- doxytag: member="map::Map::adjacenciesMap" ref="150f59413590937f850ecfef224ca5ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#150f59413590937f850ecfef224ca5ca">map.Map.adjacenciesMap</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Maps block adjacency signatures (see adjacencyKernelToBlockTypeMap) to block orientations. 
<p>

</div>
</div><p>
<a class="anchor" name="5d70ce7a8300a17bb291d9ad779624e9"></a><!-- doxytag: member="map::Map::backgroundQuadTree" ref="5d70ce7a8300a17bb291d9ad779624e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#5d70ce7a8300a17bb291d9ad779624e9">map.Map.backgroundQuadTree</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Holds background scenery. 
<p>

</div>
</div><p>
<a class="anchor" name="18068659a3af72809a28c5484b06e16d"></a><!-- doxytag: member="map::Map::deadSeeds" ref="18068659a3af72809a28c5484b06e16d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#18068659a3af72809a28c5484b06e16d">map.Map.deadSeeds</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Seeds that are no longer expanding. 
<p>
We use these to mark ownership of areas. 
</div>
</div><p>
<a class="anchor" name="2127bf69a497a845a27c75e656ad6df3"></a><!-- doxytag: member="map::Map::envGrid" ref="2127bf69a497a845a27c75e656ad6df3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#2127bf69a497a845a27c75e656ad6df3">map.Map.envGrid</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Marks spaces as belonging to different environments. 
<p>
Built to same scale as blocks. 
</div>
</div><p>
<a class="anchor" name="3bd9ad023f37ae818aae556182564f92"></a><!-- doxytag: member="map::Map::markLoc" ref="3bd9ad023f37ae818aae556182564f92" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#3bd9ad023f37ae818aae556182564f92">map.Map.markLoc</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If this is not None, then <a class="el" href="classmap_1_1_map.html#f2dfb946b252c489a9c3f6a66e9da343" title="Draw an intermediary status image and saves it to disk.">drawStatus()</a> will focus on this area. 
<p>

</div>
</div><p>
<a class="anchor" name="7f8fb9a344a0dd68cca9958408551f93"></a><!-- doxytag: member="map::Map::platformsQuadTree" ref="7f8fb9a344a0dd68cca9958408551f93" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#7f8fb9a344a0dd68cca9958408551f93">map.Map.platformsQuadTree</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A quadtree of Platform instances created during fixAccessibility, that will be converted into actual blocks near the end of mapgen. 
<p>

</div>
</div><p>
<a class="anchor" name="f3c9bc6f5efea67345967b59e8547a3a"></a><!-- doxytag: member="map::Map::regions" ref="f3c9bc6f5efea67345967b59e8547a3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#f3c9bc6f5efea67345967b59e8547a3a">map.Map.regions</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This will be a dict that maps locations to zones. 
<p>

</div>
</div><p>
<a class="anchor" name="ffe2209a978182f65268e6ceae34b256"></a><!-- doxytag: member="map::Map::tree" ref="ffe2209a978182f65268e6ceae34b256" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#ffe2209a978182f65268e6ceae34b256">map.Map.tree</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Marks high-level structure of the map. 
<p>

</div>
</div><p>
<a class="anchor" name="8593d2583815096eb58195fc9028e2c9"></a><!-- doxytag: member="map::Map::treeLines" ref="8593d2583815096eb58195fc9028e2c9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmap_1_1_map.html#8593d2583815096eb58195fc9028e2c9">map.Map.treeLines</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This quadtree holds lines; we use it to make certain that limbs of the tree do not come too close to each other (or intersect). 
<p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>map.py</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Sep 9 19:19:02 2009 for JBRL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
